<script>
    const qrCodeRegionId = "reader";
    const sheetURL = "https://script.google.com/macros/s/AKfycbx04-GtmrMIZAZI2E3g5i26F6x2yla5HW9SStqLavz_8rAUP6nuAgB08F42o792xE65MQ/exec";

    function onScanSuccess(decodedText, decodedResult) {
      document.getElementById("qrText").innerText = decodedText;
      document.getElementById("status").innerText = "üì§ ƒêang g·ª≠i d·ªØ li·ªáu...";
      
      fetch(sheetURL, {
        method: "POST",
        body: new URLSearchParams({ data: decodedText })
      })
      .then(res => res.text())
      .then(result => {
        document.getElementById("status").innerText = "‚úÖ ƒê√£ g·ª≠i: " + decodedText;
      })
      .catch(error => {
        document.getElementById("status").innerText = "‚ùå L·ªói g·ª≠i d·ªØ li·ªáu!";
        console.error("L·ªói:", error);
      });
    }

    const html5QrCode = new Html5Qrcode(qrCodeRegionId);
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      onScanSuccess
    );
  </script>